/*! vjs-html5-dash - v0.1.0 - 2014-12-12
* Copyright (c) 2014 Christian Pillsbury; Licensed ISC */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(a){b.exports="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b){"use strict";function c(a,b){a.one(a.eventList.INITIALIZATION_LOADED,function(c){b.one(b.eventList.QUEUE_EMPTY,function(){d(a,b)}),b.addToQueue(c.data)}),a.loadInitialization()}function d(a,b){a.on(a.eventList.SEGMENT_LOADED,function c(d){b.one(b.eventList.QUEUE_EMPTY,function(){var b=a.loadNextSegment();b||a.off(a.eventList.SEGMENT_LOADED,c)}),b.addToQueue(d.data)}),a.loadNextSegment()}function e(a,b,c){var d=a.getMediaSetByType(c).getSourceBufferType(),e=b.addSourceBuffer(d);return new k(e)}function f(a,b,c){var d=new j(a,c),f=e(a,b,c);return new n(d,f,c)}function g(a,b){var c=o.filter(function(b){i(a.getMediaSetByType(b));return i}),d=c.map(function(c){return f(a,b,c)});return d}function h(a,b,d){var e=this;this.__downloadRateMgr=new l([new m(d)]),this.__streamLoaders=g(a,b),this.__streamLoaders.forEach(function(a){c(a.getSegmentLoader(),a.getSourceBufferDataQueue())}),d.on("seeked",function(){var a=!1;console.log("Seeked Current Time: "+d.currentTime()),e.__streamLoaders.forEach(function(b){a=b.getSourceBufferDataQueue().hasBufferedDataForTime(d.currentTime()),console.log("Has Data @ Time? "+a)})}),d.on("seeking",function(){var a=!1;console.log("Seeking Current Time: "+d.currentTime()),e.__streamLoaders.forEach(function(b){a=b.getSourceBufferDataQueue().hasBufferedDataForTime(d.currentTime()),console.log("Has Data @ Time? "+a)})})}var i=a("./util/existy.js"),j=a("./segments/SegmentLoader.js"),k=a("./sourceBuffer/SourceBufferDataQueue.js"),l=a("./rules/DownloadRateManager.js"),m=a("./rules/downloadRate/VideoReadyStateRule.js"),n=a("./StreamLoader.js"),o=(a("./dash/mpd/getMpd.js"),a("./manifest/MediaTypes.js"));b.exports=h},{"./StreamLoader.js":4,"./dash/mpd/getMpd.js":5,"./manifest/MediaTypes.js":13,"./rules/DownloadRateManager.js":15,"./rules/downloadRate/VideoReadyStateRule.js":18,"./segments/SegmentLoader.js":19,"./sourceBuffer/SourceBufferDataQueue.js":20,"./util/existy.js":21}],3:[function(a,b){"use strict";function c(a,b){var c=this,g=new e(a.src,!1);g.load(function(){var a=new d,e=function(){a.removeEventListener("sourceopen",e,!1),c.__playlistLoader=new f(g,a,b)};a.addEventListener("sourceopen",e,!1),b.setSrc(URL.createObjectURL(a))})}var d=a("global/window").MediaSource,e=a("./manifest/ManifestController.js"),f=a("./PlaylistLoader.js");b.exports=c},{"./PlaylistLoader.js":2,"./manifest/ManifestController.js":12,"global/window":1}],4:[function(a,b){"use strict";function c(a,b,c){this.__segmentLoader=a,this.__sourceBufferDataQueue=b,this.__mediaType=c}c.prototype.getMediaType=function(){return this.__mediaType},c.prototype.getSegmentLoader=function(){return this.__segmentLoader},c.prototype.getSourceBufferDataQueue=function(){return this.__sourceBufferDataQueue},c.prototype.getCurrentSegmentNumber=function(){return this.__segmentLoader.getCurrentSegmentNumber()},c.prototype.getLastDownloadRoundTripTimeSpan=function(){return this.__segmentLoader.getLastDownloadStartTime()},b.exports=c},{}],5:[function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l=a("../../xmlfun.js"),m=a("./util.js"),n=m.parseRootUrl,o=function(a){var b=[a].concat(l.getAncestors(a)),c=!1,d=b.map(function(a){if(c)return"";if(!a.hasChildNodes())return"";for(var b,d=0;d<a.childNodes.length;d++)if(b=a.childNodes.item(d),"BaseURL"===b.nodeName){var e=b.childNodes.item(0),f=e.wholeText.trim();return 0===f.indexOf("http://")&&(c=!0),e.wholeText.trim()}return""}),e=d.reverse().join("");return e?e:n(a.baseURI)},p=["AdaptationSet","Representation","SubRepresentation"],q=function(a){return p.indexOf(a.nodeName)>=0},r=function(a){return!q(a)},s=l.getInheritableAttribute("width"),t=l.getInheritableAttribute("height"),u=l.getInheritableAttribute("frameRate"),v=l.getInheritableAttribute("mimeType"),w=l.getInheritableAttribute("codecs"),x=l.getInheritableElement("SegmentTemplate",r),y=l.getAttrFn("mediaPresentationDuration"),z=l.getAttrFn("type"),A=l.getAttrFn("minimumUpdatePeriod"),B=l.getAttrFn("id"),C=l.getAttrFn("bandwidth"),D=l.getAttrFn("initialization"),E=l.getAttrFn("media"),F=l.getAttrFn("duration"),G=l.getAttrFn("timescale"),H=l.getAttrFn("presentationTimeOffset"),I=l.getAttrFn("startNumber");c=function(a){return{xml:a,getPeriods:l.preApplyArgsFn(j,a,"Period",d),getMediaPresentationDuration:l.preApplyArgsFn(y,a),getType:l.preApplyArgsFn(z,a),getMinimumUpdatePeriod:l.preApplyArgsFn(A,a)}},d=function(a){return{xml:a,getAdaptationSets:l.preApplyArgsFn(j,a,"AdaptationSet",e),getAdaptationSetByType:function(b){return i(b,a)},getMpd:l.preApplyArgsFn(k,a,"MPD",c)}},e=function(a){return{xml:a,getRepresentations:l.preApplyArgsFn(j,a,"Representation",f),getSegmentTemplate:function(){return g(x(a))},getPeriod:l.preApplyArgsFn(k,a,"Period",d),getMpd:l.preApplyArgsFn(k,a,"MPD",c),getMimeType:l.preApplyArgsFn(v,a)}},f=function(a){return{xml:a,getSegmentTemplate:function(){return g(x(a))},getAdaptationSet:l.preApplyArgsFn(k,a,"AdaptationSet",e),getPeriod:l.preApplyArgsFn(k,a,"Period",d),getMpd:l.preApplyArgsFn(k,a,"MPD",c),getId:l.preApplyArgsFn(B,a),getWidth:l.preApplyArgsFn(s,a),getHeight:l.preApplyArgsFn(t,a),getFrameRate:l.preApplyArgsFn(u,a),getBandwidth:l.preApplyArgsFn(C,a),getCodecs:l.preApplyArgsFn(w,a),getBaseUrl:l.preApplyArgsFn(o,a),getMimeType:l.preApplyArgsFn(v,a)}},g=function(a){return{xml:a,getAdaptationSet:l.preApplyArgsFn(k,a,"AdaptationSet",e),getPeriod:l.preApplyArgsFn(k,a,"Period",d),getMpd:l.preApplyArgsFn(k,a,"MPD",c),getInitialization:l.preApplyArgsFn(D,a),getMedia:l.preApplyArgsFn(E,a),getDuration:l.preApplyArgsFn(F,a),getTimescale:l.preApplyArgsFn(G,a),getPresentationTimeOffset:l.preApplyArgsFn(H,a),getStartNumber:l.preApplyArgsFn(I,a)}},i=function(a,b){for(var c,d,f,g=b.getElementsByTagName("AdaptationSet"),h=0;h<g.length;h++)if(c=g.item(h),d=c.getElementsByTagName("Representation")[0],f=v(d),f&&f.indexOf(a)>=0)return e(c);return null},h=function(a){return j(a,"MPD",c)[0]},j=function(a,b,c){var d=Array.prototype.slice.call(a.getElementsByTagName(b));if("function"==typeof c){var e=d.map(c);return e}return d},k=function(a,b,c){return b&&a&&a.parentNode&&a.parentNode.hasOwnProperty("nodeName")?a.parentNode.nodeName===b?"function"==typeof c?c(a.parentNode):a.parentNode:k(a.parentNode,b,c):null},b.exports=h},{"../../xmlfun.js":28,"./util.js":6}],6:[function(a,b){"use strict";var c,d,e=31536e3,f=2592e3,g=86400,h=3600,i=60,j=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;c=function(a){return"string"!=typeof a?"":-1===a.indexOf("/")?"":(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),a.substring(0,a.lastIndexOf("/")+1))},d=function(a){var b=j.exec(a);return parseFloat(b[2]||0)*e+parseFloat(b[4]||0)*f+parseFloat(b[6]||0)*g+parseFloat(b[8]||0)*h+parseFloat(b[10]||0)*i+parseFloat(b[12]||0)};var k={parseRootUrl:c,parseMediaPresentationDuration:d};b.exports=k},{}],7:[function(a,b){"use strict";function c(a){return a&&a.getSegmentTemplate()?d(a):void 0}var d,e,f,g,h,i,j,k,l,m,n=a("../../xmlfun.js"),o=a("../mpd/util.js").parseMediaPresentationDuration,p=a("./segmentTemplate");g=function(a){var b=a.getCodecs(),c=a.getMimeType(),d=b.split(".").map(function(a){return a.replace(/^0+(?!\.|$)/,"")}),e=d.join(".");return c+';codecs="'+e+'"'},h=function(a){return Number(a.getBandwidth())},i=function(a){var b=a.getMpd().getMediaPresentationDuration(),c=Number(o(b)),d=Number(a.getSegmentTemplate().getPresentationTimeOffset());return Number(c-d)},j=function(a){var b=a.getSegmentTemplate();return Number(b.getDuration())/Number(b.getTimescale())},k=function(a){return Math.ceil(i(a)/j(a))},l=function(a){return Number(a.getSegmentTemplate().getStartNumber())},m=function(a){return k(a)+l(a)-1},d=function(a){return{getType:n.preApplyArgsFn(g,a),getBandwidth:n.preApplyArgsFn(h,a),getTotalDuration:n.preApplyArgsFn(i,a),getSegmentDuration:n.preApplyArgsFn(j,a),getTotalSegmentCount:n.preApplyArgsFn(k,a),getStartNumber:n.preApplyArgsFn(l,a),getEndNumber:n.preApplyArgsFn(m,a),getInitialization:function(){var b={};return b.getUrl=function(){var b=a.getBaseUrl(),c=a.getId(),d=a.getSegmentTemplate().getInitialization(),e=p.replaceIDForTemplate(d,c);return b+e},b},getSegmentByNumber:function(b){return e(a,b)},getSegmentByTime:function(b){return f(a,b)}}},e=function(a,b){var c={};return c.getUrl=function(){var c=a.getBaseUrl(),d=a.getSegmentTemplate().getMedia(),e=p.replaceIDForTemplate(d,a.getId()),f=p.replaceTokenForTemplate(e,"Number",b);return c+f},c.getStartTime=function(){return b*j(a)},c.getDuration=function(){return j(a)},c.getNumber=function(){return b},c},f=function(a){var b=j(a),c=Math.floor(i(a)/b),d=e(a,c);return d},b.exports=c},{"../../xmlfun.js":28,"../mpd/util.js":6,"./segmentTemplate":8}],8:[function(a,b){"use strict";var c,d,e,f,g;d=function(a,b){for(;a.length<b;)a="0"+a;return a},e=function(a,b,c){for(var e,f,g,h,i=0,j=0,k=b.length,l="%0",m=l.length;;){if(i=a.indexOf("$"+b),0>i)return a;if(j=a.indexOf("$",i+k),0>j)return a;if(e=a.indexOf(l,i+k),e>i&&j>e)switch(f=a.charAt(j-1),g=parseInt(a.substring(e+m,j-1),10),f){case"d":case"i":case"u":h=d(c.toString(),g);break;case"x":h=d(c.toString(16),g);break;case"X":h=d(c.toString(16),g).toUpperCase();break;case"o":h=d(c.toString(8),g);break;default:return console.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),a}else h=c;a=a.substring(0,i)+h+a.substring(j+1)}},f=function(a){return a.split("$$").join("$")},g=function(a,b){if(null===b||-1===a.indexOf("$RepresentationID$"))return a;var c=b.toString();return a.split("$RepresentationID$").join(c)},c={zeroPadToLength:d,replaceTokenForTemplate:e,unescapeDollarsInTemplate:f,replaceIDForTemplate:g},b.exports=c},{}],9:[function(a,b){"use strict";var c=a("./eventManager.js"),d={trigger:function(a){c.trigger(this,a)},one:function(a,b){c.one(this,a,b)},on:function(a,b){c.on(this,a,b)},off:function(a,b){c.off(this,a,b)}};b.exports=d},{"./eventManager.js":10}],10:[function(a,b){"use strict";var c=a("global/window").videojs,d={trigger:c.trigger,one:c.one,on:c.on,off:c.off};b.exports=d},{"global/window":1}],11:[function(a){(function(){"use strict";function b(a){var b="",c="maybe",e=b;return d.MediaSource?/application\/dash\+xml/.test(a.type)?(console.log("matched type"),c):/\.mpd$/i.test(a.src)?(console.log("matched extension"),c):e:b}function c(a,b){return new f(a,b)}var d=a("global/window"),e=d.videojs,f=a("./SourceHandler");if(!e)throw new Error("The video.js library must be included to use this MPEG-DASH source handler.");e.Html5.registerSourceHandler({canHandleSource:b,handleSource:c},0)}).call(this)},{"./SourceHandler":3,"global/window":1}],12:[function(a,b){"use strict";function c(a,b){this.__autoLoad=h(b),this.setSourceUri(a)}function d(a){this.__adaptationSet=a}var e,f,g=a("../util/existy.js"),h=a("../util/truthy.js"),i=a("../util/isString.js"),j=a("../util/isFunction.js"),k=a("./loadManifest.js"),l=a("../util/extendObject.js"),m=a("../events/EventDispatcherMixin.js"),n=a("../dash/segments/getSegmentListForRepresentation.js"),o=a("../dash/mpd/getMpd.js"),p=a("./MediaTypes.js"),q=p[0];f=function(a,b){if(!i(a))return q;var c=b.find(function(b){return!!a&&a.indexOf(b)>=0});return g(c)?c:q},e=function(a){var b=a.getCodecs(),c=a.getMimeType(),d=b.split(".").map(function(a){return a.replace(/^0+(?!\.|$)/,"")}),e=d.join(".");return c+';codecs="'+e+'"'},c.prototype.eventList={MANIFEST_LOADED:"manifestLoaded"},c.prototype.getSourceUri=function(){return this.__sourceUri},c.prototype.setSourceUri=function(a){if(a!==this.__sourceUri){if(!a)return void this.__clearSourceUri();this.__clearCurrentUpdateInterval(),this.__sourceUri=a,this.__autoLoad&&this.load()}},c.prototype.__clearSourceUri=function(){this.__sourceUri=null,this.__clearCurrentUpdateInterval()},c.prototype.load=function(a){var b=this;k(b.__sourceUri,function(c){b.__manifestController=c.manifestXml,b.__setupUpdateInterval(),b.trigger({type:b.eventList.MANIFEST_LOADED,target:b,data:b.__manifestController}),j(a)&&a(c.manifestXml)})},c.prototype.__clearCurrentUpdateInterval=function(){g(this.__updateInterval)&&clearInterval(this.__updateInterval)},c.prototype.__setupUpdateInterval=function(){if(this.__updateInterval&&a.__clearCurrentUpdateInterval(),this.getShouldUpdate()){var a=this,b=2,c=Math.max(this.getUpdateRate(),b);this.__updateInterval=setInterval(function(){a.load()},c)}},c.prototype.getMediaSetByType=function(a){if(p.indexOf(a)<0)throw new Error("Invalid type. Value must be one of: "+p.join(", "));var b=o(this.__manifestController).getPeriods()[0].getAdaptationSets(),c=b.find(function(b){return f(b.getMimeType(),p)===a});return g(c)?new d(c):null},c.prototype.getMediaSets=function(){var a=o(this.__manifestController).getPeriods()[0].getAdaptationSets(),b=a.map(function(a){return new d(a)});return b},c.prototype.getStreamType=function(){var a=o(this.__manifestController).getType();return a},c.prototype.getUpdateRate=function(){var a=o(this.__manifestController).getMinimumUpdatePeriod();return Number(a)},c.prototype.getShouldUpdate=function(){var a="dynamic"===this.getStreamType(),b=this.getUpdateRate()>0;return a&&b},l(c.prototype,m),d.prototype.getMediaType=function(){var a=f(this.getMimeType(),p);return a},d.prototype.getMimeType=function(){var a=this.__adaptationSet.getMimeType();return a},d.prototype.getSourceBufferType=function(){var a=this.__adaptationSet.getRepresentations()[0],b=e(a);return b},d.prototype.getTotalDuration=function(){var a=this.__adaptationSet.getRepresentations()[0],b=n(a),c=b.getTotalDuration();return c},d.prototype.getTotalSegmentCount=function(){var a=this.__adaptationSet.getRepresentations()[0],b=n(a),c=b.getTotalSegmentCount();return c},d.prototype.getSegmentDuration=function(){var a=this.__adaptationSet.getRepresentations()[0],b=n(a),c=b.getSegmentDuration();return c},d.prototype.getSegmentListStartNumber=function(){var a=this.__adaptationSet.getRepresentations()[0],b=n(a),c=b.getStartNumber();return c},d.prototype.getSegmentListEndNumber=function(){var a=this.__adaptationSet.getRepresentations()[0],b=n(a),c=b.getEndNumber();return c},d.prototype.getSegmentLists=function(){var a=this.__adaptationSet.getRepresentations(),b=a.map(n);return b},d.prototype.getSegmentListByBandwidth=function(a){var b=this.__adaptationSet.getRepresentations(),c=b.find(function(b){var c=b.getBandwidth();return Number(c)===Number(a)}),d=n(c);return d},d.prototype.getAvailableBandwidths=function(){return this.__adaptationSet.getRepresentations().map(function(a){return a.getBandwidth()}).filter(function(a){return g(a)})},b.exports=c},{"../dash/mpd/getMpd.js":5,"../dash/segments/getSegmentListForRepresentation.js":7,"../events/EventDispatcherMixin.js":9,"../util/existy.js":21,"../util/extendObject.js":22,"../util/isFunction.js":24,"../util/isString.js":26,"../util/truthy.js":27,"./MediaTypes.js":13,"./loadManifest.js":14}],13:[function(a,b){b.exports=["video","audio"]},{}],14:[function(a,b){"use strict";function c(a,b){var c,e=(d(a),new XMLHttpRequest);c=function(){e.status<200||e.status>299||"function"==typeof b&&b({manifestXml:e.responseXML})};try{e.onload=c,e.open("GET",a,!0),e.send()}catch(f){e.onerror()}}var d=a("../dash/mpd/util.js").parseRootUrl;b.exports=c},{"../dash/mpd/util.js":6}],15:[function(a,b){"use strict";function c(a,b){b.on(a.eventList.DOWNLOAD_RATE_CHANGED,function(){a.determineDownloadRate()})}function d(a){var b=this;this.__downloadRateRules=g(a)?a:a?[a]:[],this.__downloadRateRules.forEach(function(a){c(b,a)}),this.__lastDownloadRate=this.downloadRates.DONT_DOWNLOAD,this.determineDownloadRate()}var e=a("../util/extendObject.js"),f=a("../events/EventDispatcherMixin.js"),g=a("../util/isArray.js"),h=a("./downloadRate/DownloadRates.js"),i=a("./downloadRate/DownloadRateEventTypes.js");d.prototype.eventList=i,d.prototype.downloadRates=h,d.prototype.determineDownloadRate=function(){var a,b=this,c=h.DONT_DOWNLOAD;return b.__downloadRateRules.forEach(function(b){a=b.getDownloadRate(),a>c&&(c=a)}),c!==b.__lastDownloadRate&&(b.__lastDownloadRate=c,b.trigger({type:b.eventList.DOWNLOAD_RATE_CHANGED,target:b,downloadRate:b.__lastDownloadRate})),c},d.prototype.addDownloadRateRule=function(a){var b=this;b.__downloadRateRules.push(a),c(b,a)},e(d.prototype,f),b.exports=d},{"../events/EventDispatcherMixin.js":9,"../util/extendObject.js":22,"../util/isArray.js":23,"./downloadRate/DownloadRateEventTypes.js":16,"./downloadRate/DownloadRates.js":17}],16:[function(a,b){var c={DOWNLOAD_RATE_CHANGED:"downloadRateChanged"};b.exports=c},{}],17:[function(a,b){"use strict";var c={DONT_DOWNLOAD:0,PLAYBACK_RATE:1e3,DOWNLOAD_RATE:1e4};b.exports=c},{}],18:[function(a,b){"use strict";function c(a){return a.el().readyState}function d(a){function b(){var a=c(e.__tech)===j.HAVE_ENOUGH_DATA?e.downloadRates.PLAYBACK_RATE:e.downloadRates.DOWNLOAD_RATE;return a}function d(){var a=b();e.__downloadRate!==a&&(console.log("DOWNLOAD RATE CHANGED TO: "+a),e.__downloadRate=a,e.trigger({type:e.eventList.DOWNLOAD_RATE_CHANGED,target:e,downloadRate:e.__downloadRate}))}var e=this;this.__tech=a,this.__downloadRate=this.downloadRates.DONT_DOWNLOAD,i.forEach(function(b){a.on(b,function(){d()})}),d()}var e=a("../../util/extendObject.js"),f=a("../../events/EventDispatcherMixin.js"),g=a("./DownloadRates.js"),h=a("./DownloadRateEventTypes.js"),i=["loadstart","durationchange","loadedmetadata","loadeddata","progress","canplay","canplaythrough"],j={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};d.prototype.eventList=h,d.prototype.downloadRates=g,d.prototype.getDownloadRate=function(){return this.__downloadRate},e(d.prototype,f),b.exports=d},{"../../events/EventDispatcherMixin.js":9,"../../util/extendObject.js":22,"./DownloadRateEventTypes.js":16,"./DownloadRates.js":17}],19:[function(a,b){function c(a,b){if(!e(a))throw new Error("SegmentLoader must be initialized with a manifestController!");if(!e(b))throw new Error("SegmentLoader must be initialized with a mediaType!");this.__manifestController=a,this.__mediaType=b,this.__currentBandwidth=this.getCurrentBandwidth()}var d,e=a("../util/existy.js"),f=a("../util/isNumber.js"),g=a("../util/extendObject.js"),h=a("../events/EventDispatcherMixin.js"),i=3,j=250;d=function(a,b,c,e){this.__lastDownloadStartTime=Number((new Date).getTime()/1e3),this.__lastDownloadCompleteTime=null;var f=new XMLHttpRequest,g=a.getUrl();f.open("GET",g,!0),f.responseType="arraybuffer",f.onload=function(){return f.status<200||f.status>299?(console.log("Failed to load Segment @ URL: "+a.getUrl()),void(c>0?setTimeout(function(){d.call(this,a,b,c-1,e)},e):console.log("FAILED TO LOAD SEGMENT EVEN AFTER RETRIES"))):(this.__lastDownloadCompleteTime=Number((new Date).getTime()/1e3),void("function"==typeof b&&b(f.response)))},f.onerror=function(){console.log("Failed to load Segment @ URL: "+a.getUrl()),c>0?setTimeout(function(){d(a,b,c-1,e)},e):console.log("FAILED TO LOAD SEGMENT EVEN AFTER RETRIES")},f.send()},c.prototype.eventList={INITIALIZATION_LOADED:"initializationLoaded",SEGMENT_LOADED:"segmentLoaded"},c.prototype.__getMediaSet=function(){var a=this.__manifestController.getMediaSetByType(this.__mediaType);return a},c.prototype.__getDefaultSegmentList=function(){var a=this.__getMediaSet().getSegmentLists()[0];return a},c.prototype.getCurrentBandwidth=function(){return f(this.__currentBandwidth)||(this.__currentBandwidth=this.__getDefaultSegmentList().getBandwidth()),this.__currentBandwidth},c.prototype.setCurrentBandwidth=function(a){if(!f(a))throw new Error("SegmentLoader::setCurrentBandwidth() expects a numeric value for bandwidth!");var b=this.getAvailableBandwidths();if(b.indexOf(a)<0)throw new Error("SegmentLoader::setCurrentBandwidth() must be set to one of the following values: "+b.join(", "));this.__currentBandwidth=a},c.prototype.getCurrentSegmentList=function(){var a=this.__getMediaSet().getSegmentListByBandwidth(this.getCurrentBandwidth());return a},c.prototype.getAvailableBandwidths=function(){var a=this.__getMediaSet().getAvailableBandwidths();return a},c.prototype.getStartNumber=function(){var a=this.__getMediaSet().getSegmentListStartNumber();return a},c.prototype.getCurrentSegment=function(){var a=this.getCurrentSegmentList().getSegmentByNumber(this.__currentSegmentNumber);return a},c.prototype.getCurrentSegmentNumber=function(){return this.__currentSegmentNumber},c.prototype.getEndNumber=function(){var a=this.__getMediaSet().getSegmentListEndNumber();return a},c.prototype.getLastDownloadStartTime=function(){return e(this.__lastDownloadStartTime)?this.__lastDownloadStartTime:-1},c.prototype.getLastDownloadCompleteTime=function(){return e(this.__lastDownloadCompleteTime)?this.__lastDownloadCompleteTime:-1},c.prototype.getLastDownloadRoundTripTimeSpan=function(){return this.getLastDownloadCompleteTime()-this.getLastDownloadStartTime()},c.prototype.loadInitialization=function(){var a=this,b=this.getCurrentSegmentList(),c=b.getInitialization();return c?(d.call(this,c,function(b){var c=new Uint8Array(b);a.trigger({type:a.eventList.INITIALIZATION_LOADED,target:a,data:c})}),!0):!1},c.prototype.loadNextSegment=function(){var a=null===this.__currentSegmentNumber||void 0===this.__currentSegmentNumber,b=a?this.getStartNumber():this.__currentSegmentNumber+1;return this.loadSegmentAtNumber(b)},c.prototype.loadSegmentAtNumber=function(a){var b=this;if(a>this.getEndNumber())return!1;var c=this.getCurrentSegmentList().getSegmentByNumber(a);return d.call(this,c,function(a){b.__currentSegmentNumber=c.getNumber();var d=new Uint8Array(a);b.trigger({type:b.eventList.SEGMENT_LOADED,target:b,data:d})},i,j),!0},c.prototype.loadSegmentAtTime=function(a){var b=this,c=this.getCurrentSegmentList();if(a>c.getTotalDuration())return!1;var e=c.getSegmentByTime(a);return d.call(this,e,function(a){b.__currentSegmentNumber=e.getNumber();var c=new Uint8Array(a);b.trigger({type:b.eventList.SEGMENT_LOADED,target:b,data:c})},i,j),!0},g(c.prototype,h),b.exports=c},{"../events/EventDispatcherMixin.js":9,"../util/existy.js":21,"../util/extendObject.js":22,"../util/isNumber.js":25}],20:[function(a,b){"use strict";function c(a){if(!a)throw new Error("The sourceBuffer constructor argument cannot be null.");var b=this,c=[];a.addEventListener("updateend",function(a){return a.target.updating?void 0:(b.trigger({type:b.eventList.SEGMENT_ADDED_TO_BUFFER,target:b}),c.length<=0?void b.trigger({type:b.eventList.QUEUE_EMPTY,target:b}):void a.target.appendBuffer(c.shift()))}),this.__dataQueue=c,this.__sourceBuffer=a}var d=a("../util/extendObject.js"),e=a("../events/EventDispatcherMixin.js");c.prototype.eventList={QUEUE_EMPTY:"queueEmpty",SEGMENT_ADDED_TO_BUFFER:"segmentAddedToBuffer"},c.prototype.addToQueue=function(a){0!==this.__dataQueue.length||this.__sourceBuffer.updating?this.__dataQueue.push(a):this.__sourceBuffer.appendBuffer(a)},c.prototype.clearQueue=function(){this.__dataQueue=[]},c.prototype.hasBufferedDataForTime=function(a){var b,c,d=this.__sourceBuffer.buffered,e=d.length,f=0;for(f;e>f;f++)if(b=d.start(f),c=d.end(f),a>=b&&c>=a)return!0;return!1},d(c.prototype,e),b.exports=c},{"../events/EventDispatcherMixin.js":9,"../util/extendObject.js":22}],21:[function(a,b){"use strict";function c(a){return null!==a&&void 0!==a}b.exports=c},{}],22:[function(a,b){"use strict";var c=function(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a};b.exports=c},{}],23:[function(a,b){"use strict";function c(a){return"[object Array]"===e.toString.call(a)}var d=function(){},e=new d;b.exports=c},{}],24:[function(a,b){"use strict";var c=function(){},d=new c,e=function(a){return"function"==typeof a};e(/x/)&&(e=function(a){return"function"==typeof a&&"[object Function]"===d.toString.call(a)}),b.exports=e},{}],25:[function(a,b){"use strict";function c(a){return"number"==typeof a||a&&"object"==typeof a&&"[object Number]"===e.toString.call(a)||!1}var d=function(){},e=new d;b.exports=c},{}],26:[function(a,b){"use strict";var c=function(){},d=new c,e=function(a){return"string"==typeof a||a&&"object"==typeof a&&"[object String]"===d.toString.call(a)||!1};b.exports=e},{}],27:[function(a,b){"use strict";function c(a){return a!==!1&&d(a)}var d=a("./existy.js");b.exports=c},{"./existy.js":21}],28:[function(a,b){"use strict";function c(a){return null!==a}function d(a){return a!==!1&&c(a)}function e(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(this,b)}}var f="[object Function]",g="[object String]",h=Object.prototype.toString,i=function(a){return"function"==typeof a};i(/x/)&&(i=function(a){return"function"==typeof a&&h.call(a)===f});var j=function(a){return"string"==typeof a||a&&"object"==typeof a&&h.call(a)===g||!1},k=function(a,b){var d=[];return i(b)||(b=function(){return!1}),function e(a){b(a,d)||c(a)&&c(a.parentNode)&&(d.push(a.parentNode),e(a.parentNode))}(a),d},l=function(a){return function(b){return b.getElementsByTagName(a)}},m=function(a,b){return"string"!=typeof a||""===a?void 0:function(d){return c(d)&&c(d.hasAttribute)&&c(d.getAttribute)?c(b)?d.getAttribute(a)===b:d.hasAttribute(a):!1}},n=function(a){return j(a)?function(b){return c(b)&&i(b.getAttribute)?b.getAttribute(a):void 0}:void 0},o=function(a){return j(a)&&""!==a?function b(d){return c(d)&&c(d.hasAttribute)&&c(d.getAttribute)?d.hasAttribute(a)?d.getAttribute(a):c(d.parentNode)?b(d.parentNode):void 0:void 0}:void 0},p=function(a,b){return j(a)&&""!==a?(i(b)||(b=function(){return!1}),function d(e){if(!c(e)||!c(e.getElementsByTagName))return void 0;if(b(e))return void 0;var f=e.getElementsByTagName(a);return c(f)&&f.length>0?f[0]:c(e.parentNode)?d(e.parentNode):void 0}):void 0},q={};q.existy=c,q.truthy=d,q.getNodeListByName=l,q.hasMatchingAttribute=m,q.getInheritableAttribute=o,q.getAncestors=k,q.getAttrFn=n,q.preApplyArgsFn=e,q.getInheritableElement=p,b.exports=q},{}]},{},[11]);