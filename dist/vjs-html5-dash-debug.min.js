/*! vjs-html5-dash - v0.1.0 - 2015-02-03
* Copyright (c) 2015 Christian Pillsbury; Licensed ISC */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(a){b.exports="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b){"use strict";function c(a){this.__adaptationSet=a}var d=a("./util/existy.js"),e=a("./util/getMediaTypeFromMimeType.js"),f=a("./dash/segments/getSegmentListForRepresentation.js"),g=a("./util/findElementInArray.js"),h=a("./manifest/MediaTypes.js");c.prototype.getMediaType=function(){var a=e(this.getMimeType(),h);return a},c.prototype.getMimeType=function(){var a=this.__adaptationSet.getMimeType();return a},c.prototype.getSourceBufferType=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a);return b.getType()},c.prototype.getTotalDuration=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getTotalDuration();return c},c.prototype.getUTCWallClockStartTime=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getUTCWallClockStartTime();return c},c.prototype.getTotalSegmentCount=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getTotalSegmentCount();return c},c.prototype.getSegmentDuration=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getSegmentDuration();return c},c.prototype.getSegmentListStartNumber=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getStartNumber();return c},c.prototype.getSegmentListEndNumber=function(){var a=this.__adaptationSet.getRepresentations()[0],b=f(a),c=b.getEndNumber();return c},c.prototype.getSegmentLists=function(){var a=this.__adaptationSet.getRepresentations(),b=a.map(f);return b},c.prototype.getSegmentListByBandwidth=function(a){var b=this.__adaptationSet.getRepresentations(),c=g(b,function(b){var c=b.getBandwidth();return Number(c)===Number(a)}),d=f(c);return d},c.prototype.getAvailableBandwidths=function(){return this.__adaptationSet.getRepresentations().map(function(a){return Number(a.getBandwidth())}).filter(function(a){return d(a)})},b.exports=c},{"./dash/segments/getSegmentListForRepresentation.js":9,"./manifest/MediaTypes.js":15,"./util/existy.js":19,"./util/findElementInArray.js":21,"./util/getMediaTypeFromMimeType.js":22}],3:[function(a,b){"use strict";function c(a,b,c,d,e,g){var i,j=f(a,b);return h(j)?(i=j.getEnd()-a,e>i?0:g>i?1e3*(c-d):Math.floor(1e3*Math.min(c,2))):0}function d(a,b,c){var d,e,g,i=f(a,b);return h(i)?(d=c.getSegmentByTime(i.getEnd()),e=Date.now()-1e3*c.getSegmentDuration(),g=d.getUTCWallClockStartTime()-e,.003>g?0:g):0}function e(a,b,c){var d,e=f(a,b);return d=h(e)?c.getSegmentByTime(e.getEnd()):c.getIsLive()?c.getSegmentByUTCWallClockTime(Date.now()-1e3*c.getSegmentDuration()):c.getSegmentByTime(a)}function f(a,b){var c,d,e,f=b.getTimeRangeByTime(a);if(!h(f))return f;for(c=f.getIndex()+1,d=b.getLength();d>c&&(e=b.getTimeRangeByIndex(c),!(e.getStart()-f.getEnd()>.003));c++)f=e;return f}function g(a,b,c,d){if(!h(a))throw new Error("MediaTypeLoader must be initialized with a manifestController!");if(!h(b))throw new Error("MediaTypeLoader must be initialized with a mediaType!");this.__manifestController=a,this.__mediaType=b,this.__sourceBufferDataQueue=c,this.__tech=d,this.setCurrentBandwidth(this.getAvailableBandwidths()[0])}var h=a("./util/existy.js"),i=a("./util/isNumber.js"),j=a("./util/extendObject.js"),k=a("./events/EventDispatcherMixin.js"),l=a("./segments/loadSegment.js"),m=20,n=40,o=3,p=250;g.prototype.eventList={RECHECK_SEGMENT_LOADING:"recheckSegmentLoading",RECHECK_CURRENT_SEGMENT_LIST:"recheckCurrentSegmentList",DOWNLOAD_DATA_UPDATE:"downloadDataUpdate"},g.prototype.getMediaType=function(){return this.getMediaSet().getMediaType()},g.prototype.getMediaSet=function(){return this.__manifestController.getMediaSetByType(this.__mediaType)},g.prototype.getSourceBufferDataQueue=function(){return this.__sourceBufferDataQueue},g.prototype.getCurrentSegmentList=function(){return this.getMediaSet().getSegmentListByBandwidth(this.getCurrentBandwidth())},g.prototype.getCurrentBandwidth=function(){return this.__currentBandwidth},g.prototype.setCurrentBandwidth=function(a){if(!i(a))throw new Error("MediaTypeLoader::setCurrentBandwidth() expects a numeric value for bandwidth!");var b=this.getAvailableBandwidths();if(b.indexOf(a)<0)throw new Error("MediaTypeLoader::setCurrentBandwidth() must be set to one of the following values: "+b.join(", "));a!==this.__currentBandwidth&&(this.__currentBandwidthChanged=!0,this.__currentBandwidth=a)},g.prototype.getAvailableBandwidths=function(){return this.getMediaSet().getAvailableBandwidths()},g.prototype.getLastDownloadRoundTripTimeSpan=function(){return this.__lastDownloadRoundTripTimeSpan||0},g.prototype.startLoadingSegments=function(){var a,b=this;this.__recheckSegmentLoadingHandler=function(){b.trigger({type:b.eventList.RECHECK_CURRENT_SEGMENT_LIST,target:b}),b.__checkSegmentLoading(b.__tech.currentTime(),m,n)},this.on(this.eventList.RECHECK_SEGMENT_LOADING,this.__recheckSegmentLoadingHandler),this.__tech.on("seeking",this.__recheckSegmentLoadingHandler),this.getCurrentSegmentList().getIsLive()&&(a=Date.now(),this.one(this.eventList.RECHECK_SEGMENT_LOADING,function(){var c=b.getCurrentSegmentList().getSegmentByUTCWallClockTime(a),d=c.getUTCWallClockStartTime(),e=(a-d)/1e3,f=b.__sourceBufferDataQueue.getBufferedTimeRangeListAlignedToSegmentDuration(c.getDuration()).getTimeRangeByIndex(0).getStart()+e;b.__tech.setCurrentTime(f)})),this.__checkSegmentLoading(this.__tech.currentTime(),m,n)},g.prototype.stopLoadingSegments=function(){h(this.__recheckSegmentLoadingHandler)&&(this.off(this.eventList.RECHECK_SEGMENT_LOADING,this.__recheckSegmentLoadingHandler),this.__tech.off("seeking",this.__recheckSegmentLoadingHandler),this.__recheckSegmentLoadingHandler=void 0,h(this.__waitTimerId)&&(clearTimeout(this.__waitTimerId),this.__waitTimerId=void 0))},g.prototype.__checkSegmentLoading=function(a,b,f){function g(){q.__checkSegmentLoading(q.__tech.currentTime(),b,f),q.__waitTimerId=void 0}var i,j,k=this.getLastDownloadRoundTripTimeSpan(),l=this.__currentBandwidthChanged,m=this.getCurrentSegmentList(),n=m.getSegmentDuration(),o=this.__sourceBufferDataQueue.getBufferedTimeRangeListAlignedToSegmentDuration(n),p=m.getIsLive(),q=this;h(this.__waitTimerId)&&(clearTimeout(this.__waitTimerId),this.__waitTimerId=void 0),i=p?d(a,o,m):c(a,o,n,k,b,f),i>50?this.__waitTimerId=setTimeout(g,i):(j=e(a,o,m),h(j)?(h(this.__segmentLoadXhr)&&(this.__segmentLoadXhr.abort(),this.__segmentLoadXhr=void 0),this.__loadAndBufferSegment(j,m,l)):this.__waitTimerId=setTimeout(g,2e3))},g.prototype.__loadAndBufferSegment=function(a,b,c){function d(b){k.push(b.response),g=(new Date).getTime()/1e3,h.__currentBandwidthChanged=!1,h.__segmentLoadXhr=l(a,e,f,h)}function e(c){var d=h.__sourceBufferDataQueue;h.__lastDownloadRoundTripTimeSpan=(new Date).getTime()/1e3-g,k.push(c.response),h.__segmentLoadXhr=void 0,h.trigger({type:h.eventList.DOWNLOAD_DATA_UPDATE,target:h,data:{rtt:h.__lastDownloadRoundTripTimeSpan,playbackTime:a.getDuration(),bandwidth:b.getBandwidth()}}),d.one(d.eventList.QUEUE_EMPTY,function(){h.trigger({type:h.eventList.RECHECK_SEGMENT_LOADING,target:h})}),d.addToQueue(k)}function f(b){--i<=0||(console.log("Failed to load segment @ "+a.getUrl()+". Request Status: "+b.status),setTimeout(function(){g=(new Date).getTime()/1e3,h.__segmentLoadXhr=l(b.requestedSegment,e,f,h)},j))}var g,h=this,i=o,j=p,k=[];c?h.__segmentLoadXhr=l(b.getInitialization(),d,f,h):(g=(new Date).getTime()/1e3,h.__segmentLoadXhr=l(a,e,f,h))},j(g.prototype,k),b.exports=g},{"./events/EventDispatcherMixin.js":11,"./segments/loadSegment.js":17,"./util/existy.js":19,"./util/extendObject.js":20,"./util/isNumber.js":25}],4:[function(a,b){"use strict";function c(a,b,c){var d=a.getMediaSetByType(c).getSourceBufferType(),e=b.addSourceBuffer(d);return new h(e)}function d(a,b,d,e){var f=c(a,b,d);return new i(a,d,f,e)}function e(a,b,c){var e=k.filter(function(b){var c=g(a.getMediaSetByType(b));return c}),f=e.map(function(e){return d(a,b,e,c)});return f}function f(a,b,c){function d(b){var d=1,e=b.getCurrentBandwidth(),f=b.getMediaType();b.on(b.eventList.RECHECK_CURRENT_SEGMENT_LIST,function(){var g,h=a.getMediaSetByType(f),i=c.player().isFullscreen(),k={};k.downloadRateRatio=d,k.currentSegmentListBandwidth=e,k.width=i?window.screen.width:c.player().width(),k.height=i?window.screen.height:c.player().height(),g=j(h,k),b.setCurrentBandwidth(g.getBandwidth())}),b.on(b.eventList.DOWNLOAD_DATA_UPDATE,function(a){d=a.data.playbackTime/a.data.rtt,e=a.data.bandwidth}),b.startLoadingSegments()}function f(){var a=c.el().readyState,b=4===a?1:0;c.setPlaybackRate(b)}this.__tech=c,this.__mediaTypeLoaders=e(a,b,c);var g;for(g=0;g<this.__mediaTypeLoaders.length;g++)d(this.__mediaTypeLoaders[g]);var h,i=["seeking","canplay","canplaythrough"];for(g=0;g<i.length;g++)h=i[g],c.on(h,f)}var g=a("./util/existy.js"),h=a("./SourceBufferDataQueue.js"),i=a("./MediaTypeLoader.js"),j=a("./selectSegmentList.js"),k=a("./manifest/MediaTypes.js");b.exports=f},{"./MediaTypeLoader.js":3,"./SourceBufferDataQueue.js":5,"./manifest/MediaTypes.js":15,"./selectSegmentList.js":18,"./util/existy.js":19}],5:[function(a,b){"use strict";function c(a,b,c){return g(c)||(c=function(a){return a}),{getStart:function(){return c(a.buffered.start(b))},getEnd:function(){return c(a.buffered.end(b))},getIndex:function(){return b}}}function d(a,b){return{getLength:function(){return a.buffered.length},getTimeRangeByIndex:function(d){return c(a,d,b)},getTimeRangeByTime:function(d,e){i(e)||(e=.15);var f,g,h=a.buffered.length;for(g=0;h>g;g++){if(f=c(a,g,b),f.getStart()-e>d)return null;if(f.getEnd()+e>d)return f}return null}}}function e(a,b){function c(a){return Math.round(a/b)*b}return d(a,c)}function f(a){if(!a)throw new Error("The sourceBuffer constructor argument cannot be null.");var b=this,c=[];a.addEventListener("updateend",function(a){return a.target.updating?void 0:(b.trigger({type:b.eventList.SEGMENT_ADDED_TO_BUFFER,target:b}),b.__dataQueue.length<=0?void b.trigger({type:b.eventList.QUEUE_EMPTY,target:b}):void b.__sourceBuffer.appendBuffer(b.__dataQueue.shift()))}),this.__dataQueue=c,this.__sourceBuffer=a}var g=a("./util/isFunction.js"),h=a("./util/isArray.js"),i=a("./util/isNumber.js"),j=a("./util/existy.js"),k=a("./util/extendObject.js"),l=a("./events/EventDispatcherMixin.js");f.prototype.eventList={QUEUE_EMPTY:"queueEmpty",SEGMENT_ADDED_TO_BUFFER:"segmentAddedToBuffer"},f.prototype.addToQueue=function(a){var b;!j(a)||h(a)&&a.length<=0||(h(a)||(a=[a]),0!==this.__dataQueue.length||this.__sourceBuffer.updating||(b=a.shift()),this.__dataQueue=this.__dataQueue.concat(a),j(b)&&this.__sourceBuffer.appendBuffer(b))},f.prototype.clearQueue=function(){this.__dataQueue=[]},f.prototype.getBufferedTimeRangeList=function(){return d(this.__sourceBuffer)},f.prototype.getBufferedTimeRangeListAlignedToSegmentDuration=function(a){return e(this.__sourceBuffer,a)},k(f.prototype,l),b.exports=f},{"./events/EventDispatcherMixin.js":11,"./util/existy.js":19,"./util/extendObject.js":20,"./util/isArray.js":23,"./util/isFunction.js":24,"./util/isNumber.js":25}],6:[function(a,b){"use strict";function c(a,b){var c=this,g=new e(a.src,!1);g.one(g.eventList.MANIFEST_LOADED,function(){var a=new d,e=function(){a.removeEventListener("sourceopen",e,!1),c.__playlistLoader=new f(g,a,b)};a.addEventListener("sourceopen",e,!1),b.setSrc(URL.createObjectURL(a))}),g.load()}var d=a("global/window").MediaSource,e=a("./manifest/ManifestController.js"),f=a("./PlaylistLoader.js");b.exports=c},{"./PlaylistLoader.js":4,"./manifest/ManifestController.js":14,"global/window":1}],7:[function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l=a("../../xmlfun.js"),m=a("./util.js"),n=a("../../util/isArray.js"),o=a("../../util/isFunction.js"),p=a("../../util/isString.js"),q=m.parseRootUrl,r=function(a){var b=[a].concat(l.getAncestors(a)),c=!1,d=b.map(function(a){if(c)return"";if(!a.hasChildNodes())return"";for(var b,d=0;d<a.childNodes.length;d++)if(b=a.childNodes.item(d),"BaseURL"===b.nodeName){var e=b.childNodes.item(0),f=e.wholeText.trim();return 0===f.indexOf("http://")&&(c=!0),e.wholeText.trim()}return""}),e=d.reverse().join("");return e?e:q(a.baseURI)},s=l.getInheritableAttribute("width"),t=l.getInheritableAttribute("height"),u=l.getInheritableAttribute("frameRate"),v=l.getInheritableAttribute("mimeType"),w=l.getInheritableAttribute("codecs"),x=l.getMultiLevelElementList("SegmentTemplate"),y=l.getAttrFn("mediaPresentationDuration"),z=l.getAttrFn("type"),A=l.getAttrFn("minimumUpdatePeriod"),B=l.getAttrFn("availabilityStartTime"),C=l.getAttrFn("suggestedPresentationDelay"),D=l.getAttrFn("timeShiftBufferDepth"),E=l.getAttrFn("id"),F=l.getAttrFn("bandwidth"),G=l.getAttrFn("initialization"),H=l.getAttrFn("media"),I=l.getAttrFn("duration"),J=l.getAttrFn("timescale"),K=l.getAttrFn("presentationTimeOffset"),L=l.getAttrFn("startNumber");c=function(a){return{xml:a,getPeriods:l.preApplyArgsFn(j,a,"Period",d),getMediaPresentationDuration:l.preApplyArgsFn(y,a),getType:l.preApplyArgsFn(z,a),getMinimumUpdatePeriod:l.preApplyArgsFn(A,a),getAvailabilityStartTime:l.preApplyArgsFn(B,a),getSuggestedPresentationDelay:l.preApplyArgsFn(C,a),getTimeShiftBufferDepth:l.preApplyArgsFn(D,a)}},d=function(a){return{xml:a,getAdaptationSets:l.preApplyArgsFn(j,a,"AdaptationSet",e),getAdaptationSetByType:function(b){return i(b,a)},getMpd:l.preApplyArgsFn(k,a,"MPD",c)}},e=function(a){return{xml:a,getRepresentations:l.preApplyArgsFn(j,a,"Representation",f),getSegmentTemplate:function(){return g(x(a))},getPeriod:l.preApplyArgsFn(k,a,"Period",d),getMpd:l.preApplyArgsFn(k,a,"MPD",c),getMimeType:l.preApplyArgsFn(v,a)}},f=function(a){return{xml:a,getSegmentTemplate:function(){return g(x(a))},getAdaptationSet:l.preApplyArgsFn(k,a,"AdaptationSet",e),getPeriod:l.preApplyArgsFn(k,a,"Period",d),getMpd:l.preApplyArgsFn(k,a,"MPD",c),getId:l.preApplyArgsFn(E,a),getWidth:l.preApplyArgsFn(s,a),getHeight:l.preApplyArgsFn(t,a),getFrameRate:l.preApplyArgsFn(u,a),getBandwidth:l.preApplyArgsFn(F,a),getCodecs:l.preApplyArgsFn(w,a),getBaseUrl:l.preApplyArgsFn(r,a),getMimeType:l.preApplyArgsFn(v,a)}},g=function(a){function b(a,b){if(!n(b))return void 0;if(!o(a))return void 0;{var c,d;b.length}for(c=0;c<b.length;c++)if(d=a(b[c]),p(d)&&""!==d)return d;return void 0}return{xml:a,getAdaptationSet:l.preApplyArgsFn(k,a[0],"AdaptationSet",e),getPeriod:l.preApplyArgsFn(k,a[0],"Period",d),getMpd:l.preApplyArgsFn(k,a[0],"MPD",c),getInitialization:l.preApplyArgsFn(b,G,a),getMedia:l.preApplyArgsFn(b,H,a),getDuration:l.preApplyArgsFn(b,I,a),getTimescale:l.preApplyArgsFn(b,J,a),getPresentationTimeOffset:l.preApplyArgsFn(b,K,a),getStartNumber:l.preApplyArgsFn(b,L,a)}},i=function(a,b){for(var c,d,f,g=b.getElementsByTagName("AdaptationSet"),h=0;h<g.length;h++)if(c=g.item(h),d=c.getElementsByTagName("Representation")[0],f=v(d),f&&f.indexOf(a)>=0)return e(c);return null},h=function(a){return j(a,"MPD",c)[0]},j=function(a,b,c){var d=Array.prototype.slice.call(a.getElementsByTagName(b));if("function"==typeof c){var e=d.map(c);return e}return d},k=function M(a,b,c){return b&&a&&a.parentNode&&a.parentNode.nodeName?a.parentNode.nodeName===b?o(c)?c(a.parentNode):a.parentNode:M(a.parentNode,b,c):null},b.exports=h},{"../../util/isArray.js":23,"../../util/isFunction.js":24,"../../util/isString.js":26,"../../xmlfun.js":28,"./util.js":8}],8:[function(a,b){"use strict";var c,d,e,f=31536e3,g=2592e3,h=86400,i=3600,j=60,k=60,l=1e3,m=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/;c=function(a){return"string"!=typeof a?"":-1===a.indexOf("/")?"":(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),a.substring(0,a.lastIndexOf("/")+1))},d=function(a){if(!a)return Number.NaN;var b=m.exec(a);return b?parseFloat(b[2]||0)*f+parseFloat(b[4]||0)*g+parseFloat(b[6]||0)*h+parseFloat(b[8]||0)*i+parseFloat(b[10]||0)*j+parseFloat(b[12]||0):Number.NaN},e=function(a){var b,c=n.exec(a);if(b=Date.UTC(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],10),parseInt(c[5],10),c[6]&&parseInt(c[6],10)||0,c[7]&&parseFloat(c[7])*l||0),c[9]&&c[10]){var d=parseInt(c[9],10)*k+parseInt(c[10],10);b+=("+"===c[8]?-1:1)*d*j*l}return b};var o={parseRootUrl:c,parseMediaPresentationDuration:d,parseDateTime:e};b.exports=o},{}],9:[function(a,b){"use strict";function c(a){return a&&a.getSegmentTemplate()?d(a):void 0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a("../../util/existy.js"),u=a("../../xmlfun.js"),v=a("../mpd/util.js").parseMediaPresentationDuration,w=a("../mpd/util.js").parseDateTime,x=a("./segmentTemplate");h=function(a){var b=a.getCodecs(),c=a.getMimeType(),d=b.split(".").map(function(a){return a.replace(/^0+(?!\.|$)/,"")}),e=d.join(".");return c+';codecs="'+e+'"'},i=function(a){return"dynamic"===a.getMpd().getType()},j=function(a){var b=a.getBandwidth();return t(b)?Number(b):void 0},k=function(a){var b=a.getWidth();return t(b)?Number(b):void 0},l=function(a){var b=a.getHeight();return t(b)?Number(b):void 0},m=function(a){var b=a.getMpd().getMediaPresentationDuration(),c=t(b)?v(b):Number.NaN,d=Number(a.getSegmentTemplate().getPresentationTimeOffset())||0;return t(c)?Number(c-d):Number.NaN},n=function(a){var b=a.getMpd().getAvailabilityStartTime(),c=w(b);return c},o=function(a){var b=a.getMpd().getTimeShiftBufferDepth(),c=v(b);return c},p=function(a){var b=a.getSegmentTemplate();return Number(b.getDuration())/Number(b.getTimescale())},q=function(a){return Math.ceil(m(a)/p(a))},r=function(a){return Number(a.getSegmentTemplate().getStartNumber())},s=function(a){return q(a)+r(a)-1},d=function(a){return{getType:u.preApplyArgsFn(h,a),getIsLive:u.preApplyArgsFn(i,a),getBandwidth:u.preApplyArgsFn(j,a),getHeight:u.preApplyArgsFn(l,a),getWidth:u.preApplyArgsFn(k,a),getTotalDuration:u.preApplyArgsFn(m,a),getSegmentDuration:u.preApplyArgsFn(p,a),getUTCWallClockStartTime:u.preApplyArgsFn(n,a),getTimeShiftBufferDepth:u.preApplyArgsFn(o,a),getTotalSegmentCount:u.preApplyArgsFn(q,a),getStartNumber:u.preApplyArgsFn(r,a),getEndNumber:u.preApplyArgsFn(s,a),getInitialization:function(){var b={};return b.getUrl=function(){var b=a.getBaseUrl(),c=a.getId(),d=a.getSegmentTemplate().getInitialization(),e=x.replaceIDForTemplate(d,c);return e=x.replaceTokenForTemplate(e,"Bandwidth",a.getBandwidth()),b+e},b},getSegmentByNumber:function(b){return e(a,b)},getSegmentByTime:function(b){return f(a,b)},getSegmentByUTCWallClockTime:function(b){return g(a,b)}}},e=function(a,b){var c={};return c.getUrl=function(){var c,d=a.getBaseUrl(),e=a.getSegmentTemplate().getMedia(),f=x.replaceIDForTemplate(e,a.getId());return c=x.replaceTokenForTemplate(f,"Number",b),c=x.replaceTokenForTemplate(c,"Bandwidth",a.getBandwidth()),d+c},c.getStartTime=function(){return(b-r(a))*p(a)},c.getUTCWallClockStartTime=function(){return n(a)+Math.round((b-r(a))*p(a)*1e3)},c.getDuration=function(){var c,d,e,f=p(a);return s(a)===b?(d=Number(m(a)),e=1e3,c=d*e%(f*e)/e):c=f,c},c.getNumber=function(){return b},c},f=function(a,b){var c=p(a),d=r(a)||0,f=Math.floor(b/c)+d,g=e(a,f);return g.getStartTime()+g.getDuration()-b<=.003?e(a,f+1):g},g=function(a,b){var c,d=n(a);return isNaN(d)?null:(c=(b-d)/1e3,isNaN(c)?null:f(a,c))},b.exports=c},{"../../util/existy.js":19,"../../xmlfun.js":28,"../mpd/util.js":8,"./segmentTemplate":10}],10:[function(a,b){"use strict";var c,d,e,f,g;d=function(a,b){for(;a.length<b;)a="0"+a;return a},e=function(a,b,c){for(var e,f,g,h,i=0,j=0,k=b.length,l="%0",m=l.length;;){if(i=a.indexOf("$"+b),0>i)return a;if(j=a.indexOf("$",i+k),0>j)return a;if(e=a.indexOf(l,i+k),e>i&&j>e)switch(f=a.charAt(j-1),g=parseInt(a.substring(e+m,j-1),10),f){case"d":case"i":case"u":h=d(c.toString(),g);break;case"x":h=d(c.toString(16),g);break;case"X":h=d(c.toString(16),g).toUpperCase();break;case"o":h=d(c.toString(8),g);break;default:return console.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),a}else h=c;a=a.substring(0,i)+h+a.substring(j+1)}},f=function(a){return a.split("$$").join("$")},g=function(a,b){if(null===b||-1===a.indexOf("$RepresentationID$"))return a;var c=b.toString();return a.split("$RepresentationID$").join(c)},c={zeroPadToLength:d,replaceTokenForTemplate:e,unescapeDollarsInTemplate:f,replaceIDForTemplate:g},b.exports=c},{}],11:[function(a,b){"use strict";var c=a("./eventManager.js"),d={trigger:function(a){c.trigger(this,a)},one:function(a,b){c.one(this,a,b)},on:function(a,b){c.on(this,a,b)},off:function(a,b){c.off(this,a,b)}};b.exports=d},{"./eventManager.js":12}],12:[function(a,b){"use strict";var c=a("global/window").videojs,d={trigger:c.trigger,one:c.one,on:c.on,off:c.off};b.exports=d},{"global/window":1}],13:[function(a){(function(){"use strict";function b(a){return d.MediaSource?/application\/dash\+xml/.test(a.type)?g.MAYBE_HANDLE_SOURCE:/\.mpd$/i.test(a.src)?g.MAYBE_HANDLE_SOURCE:g.DOESNT_HANDLE_SOURCE:g.DOESNT_HANDLE_SOURCE}function c(a,b){return new f(a,b)}var d=a("global/window"),e=d.videojs,f=a("./SourceHandler"),g={DOESNT_HANDLE_SOURCE:"",MAYBE_HANDLE_SOURCE:"maybe"};if(!e)throw new Error("The video.js library must be included to use this MPEG-DASH source handler.");e.Html5.registerSourceHandler({canHandleSource:b,handleSource:c},0)}).call(this)},{"./SourceHandler":6,"global/window":1}],14:[function(a,b){"use strict";function c(a,b){this.__autoLoad=e(b),this.setSourceUri(a)}var d=a("../util/existy.js"),e=a("../util/truthy.js"),f=(a("../util/isString.js"),a("../util/isFunction.js"),a("../util/isArray.js"),a("../util/findElementInArray.js")),g=a("../util/getMediaTypeFromMimeType.js"),h=a("./loadManifest.js"),i=a("../util/extendObject.js"),j=a("../dash/mpd/util.js").parseMediaPresentationDuration,k=a("../events/EventDispatcherMixin.js"),l=a("../dash/mpd/getMpd.js"),m=a("../MediaSet.js"),n=a("./MediaTypes.js");c.prototype.eventList={MANIFEST_LOADED:"manifestLoaded"},c.prototype.getSourceUri=function(){return this.__sourceUri},c.prototype.setSourceUri=function(a){if(a!==this.__sourceUri){if(!a)return void this.__clearSourceUri();this.__clearCurrentUpdateInterval(),this.__sourceUri=a,this.__autoLoad&&this.load()}},c.prototype.__clearSourceUri=function(){this.__sourceUri=null,this.__clearCurrentUpdateInterval()},c.prototype.load=function(){var a=this;h(a.__sourceUri,function(b){a.__manifest=b.manifestXml,a.__setupUpdateInterval(),a.trigger({type:a.eventList.MANIFEST_LOADED,target:a,data:a.__manifest})})},c.prototype.__clearCurrentUpdateInterval=function(){d(this.__updateInterval)&&clearInterval(this.__updateInterval)},c.prototype.__setupUpdateInterval=function(){if(this.__updateInterval&&this.__clearCurrentUpdateInterval(),this.getShouldUpdate()){var a=this,b=2,c=Math.max(this.getUpdateRate(),b);this.__updateInterval=setInterval(function(){a.load()},1e3*c)}},c.prototype.getPlaylistType=function(){var a=l(this.__manifest).getType();return a},c.prototype.getUpdateRate=function(){var a=l(this.__manifest).getMinimumUpdatePeriod(),b=j(a);return b||0},c.prototype.getShouldUpdate=function(){var a="dynamic"===this.getPlaylistType(),b=this.getUpdateRate()>0;return a&&b},c.prototype.getMpd=function(){return l(this.__manifest)},c.prototype.getMediaSetByType=function(a){if(n.indexOf(a)<0)throw new Error("Invalid type. Value must be one of: "+n.join(", "));var b=l(this.__manifest).getPeriods()[0].getAdaptationSets(),c=f(b,function(b){return g(b.getMimeType(),n)===a});return d(c)?new m(c):null},c.prototype.getMediaSets=function(){var a=l(this.__manifest).getPeriods()[0].getAdaptationSets(),b=a.map(function(a){return new m(a)});return b},i(c.prototype,k),b.exports=c},{"../MediaSet.js":2,"../dash/mpd/getMpd.js":7,"../dash/mpd/util.js":8,"../events/EventDispatcherMixin.js":11,"../util/existy.js":19,"../util/extendObject.js":20,"../util/findElementInArray.js":21,"../util/getMediaTypeFromMimeType.js":22,"../util/isArray.js":23,"../util/isFunction.js":24,"../util/isString.js":26,"../util/truthy.js":27,"./MediaTypes.js":15,"./loadManifest.js":16}],15:[function(a,b){b.exports=["video","audio"]},{}],16:[function(a,b){"use strict";function c(a,b){var c,e=(d(a),new XMLHttpRequest);c=function(){e.status<200||e.status>299||"function"==typeof b&&b({manifestXml:e.responseXML})};try{e.onload=c,e.open("GET",a,!0),e.send()}catch(f){e.onerror()}}var d=a("../dash/mpd/util.js").parseRootUrl;b.exports=c},{"../dash/mpd/util.js":8}],17:[function(a,b){"use strict";function c(a,b,c,e){function f(){h.status<200||h.status>299?d(c)&&c.call(e,{requestedSegment:a,response:h.response,status:h.status}):d(b)&&b.call(e,{requestedSegment:a,response:h.response,status:h.status})}function g(){d(c)&&c.call(e,{requestedSegment:a,response:h.response,status:h.status})}var h=new XMLHttpRequest,i=a.getUrl();return h.open("GET",i,!0),h.responseType="arraybuffer",h.onload=f,h.onerror=g,h.send(),h}var d=a("../util/isFunction.js");b.exports=c},{"../util/isFunction.js":24}],18:[function(a,b){"use strict";function c(a,b){var c=a.getBandwidth(),d=b.getBandwidth();return c-d}function d(a,b){var c=a.getWidth()||0,d=b.getWidth()||0;return c-d}function e(a,b){var e=d(a,b);return 0!==e?e:c(a,b)}function f(a,b,c){var d=a.getWidth()||0,e=a.getHeight()||0;return b>=d&&c>=e}function g(a,b,c){var d=a.getBandwidth(),e=d/b;return c=c||Number.MAX_VALUE,c>=e}function h(a,b){function d(a){return f(a,n,o)}function h(a){return g(a,m,l)}var i,j,k,l=b.downloadRateRatio,m=b.currentSegmentListBandwidth,n=b.width,o=b.height,p=a.getSegmentLists().sort(c);return i=p.filter(h),j=i.sort(e).filter(d),k=j[j.length-1]||p[0]}b.exports=h},{}],19:[function(a,b){"use strict";function c(a){return null!==a&&void 0!==a}b.exports=c},{}],20:[function(a,b){"use strict";var c=function(a){var b,c,d=Array.prototype.slice.call(arguments,1),e=d.length;for(b=0;e>b;b++)if(c=d[b])for(var f in c)a[f]=c[f];return a};b.exports=c},{}],21:[function(a,b){"use strict";var c,d=a("./isArray.js"),e=a("./isFunction.js");c=function(a,b){if(!d(a)||!e(b))return void 0;var c,f,g=a.length;for(c=0;g>c;c++)if(f=a[c],b(f,c,a))return f;return void 0},b.exports=c},{"./isArray.js":23,"./isFunction.js":24}],22:[function(a,b){"use strict";var c,d=(a("./existy.js"),a("./isString.js")),e=a("./findElementInArray.js");c=function(a,b){if(!d(a))return null;var c=e(b,function(b){return!!a&&a.indexOf(b)>=0});return c},b.exports=c},{"./existy.js":19,"./findElementInArray.js":21,"./isString.js":26}],23:[function(a,b){"use strict";function c(a){return"[object Array]"===e.toString.call(a)}var d=function(){},e=new d;b.exports=c},{}],24:[function(a,b){"use strict";var c=function(){},d=new c,e=function(a){return"function"==typeof a};e(/x/)&&(e=function(a){return"function"==typeof a&&"[object Function]"===d.toString.call(a)}),b.exports=e},{}],25:[function(a,b){"use strict";function c(a){return"number"==typeof a||a&&"object"==typeof a&&"[object Number]"===e.toString.call(a)||!1}var d=function(){},e=new d;b.exports=c},{}],26:[function(a,b){"use strict";var c=function(){},d=new c,e=function(a){return"string"==typeof a||a&&"object"==typeof a&&"[object String]"===d.toString.call(a)||!1};b.exports=e},{}],27:[function(a,b){"use strict";function c(a){return a!==!1&&d(a)}var d=a("./existy.js");b.exports=c},{"./existy.js":19}],28:[function(a,b){"use strict";function c(a){return a!==!1&&e(a)}function d(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(this,b)}}var e=a("./util/existy.js"),f=a("./util/isFunction.js"),g=a("./util/isString.js"),h=function(a,b){var c=[];return f(b)||(b=function(){return!1}),function d(a){b(a,c)||e(a)&&e(a.parentNode)&&(c.push(a.parentNode),d(a.parentNode))}(a),c},i=function(a){return function(b){return b.getElementsByTagName(a)}},j=function(a,b){return"string"!=typeof a||""===a?void 0:function(c){return e(c)&&e(c.hasAttribute)&&e(c.getAttribute)?e(b)?c.getAttribute(a)===b:c.hasAttribute(a):!1}},k=function(a){return g(a)?function(b){return e(b)&&f(b.getAttribute)?b.getAttribute(a):void 0}:void 0},l=function(a){return g(a)&&""!==a?function b(c){return e(c)&&e(c.hasAttribute)&&e(c.getAttribute)?c.hasAttribute(a)?c.getAttribute(a):e(c.parentNode)?b(c.parentNode):void 0:void 0}:void 0},m=function(a,b){return g(a)&&""!==a?(f(b)||(b=function(){return!1}),function c(d){if(!e(d)||!e(d.getElementsByTagName))return void 0;if(b(d))return void 0;var f=d.getElementsByTagName(a);return e(f)&&f.length>0?f[0]:e(d.parentNode)?c(d.parentNode):void 0}):void 0},n=function(a){return g(a)&&""!==a?function(b){if(!e(b)||!f(b.getElementsByTagName))return void 0;var c,d=b.getElementsByTagName(a);return!e(d)||d.length<=0?void 0:(c=d[0],c.parentNode===b?c:void 0)}:void 0},o=function(a,b){if(!g(a)||""===a)return void 0;f(b)||(b=function(){return!1});var c=n(a);return function(a){for(var d,f=a,g=[];e(f)&&!b(f);)d=c(f),e(d)&&g.push(d),f=f.parentNode;return g.length>0?g:void 0}},p={};p.existy=e,p.truthy=c,p.getNodeListByName=i,p.hasMatchingAttribute=j,p.getInheritableAttribute=l,p.getAncestors=h,p.getAttrFn=k,p.preApplyArgsFn=d,p.getInheritableElement=m,p.getMultiLevelElementList=o,b.exports=p},{"./util/existy.js":19,"./util/isFunction.js":24,"./util/isString.js":26}]},{},[13]);